# Cloudy - Claude Code GUI 仕様書（ユーザーフィードバック反映版）

## プロジェクト概要

### 目的（「6畳に観葉植物」コンセプト）
「6畳の質素な空間に観葉植物を置く」コンセプトの下、Claude Code CLIの全機能を保持しながら、Claudiaスタイルの視覚的な優しさを統合したGUIアプリケーションを開発する。ローカル環境のカスタマイズを尊重し、日常使いに最適化されたCLI+GUI統一体験を提供する。

### 背景・課題
- **CLIの機能性は保持したい**: `ccode`エイリアス、shift+tabモード切り替え等
- **GUIの親しみやすさが欲しい**: 対話感のあるカード型UI、ロボットアイコン
- **シンプルさを重視**: 複雑な分析機能やサイドバーは不要
- **日常使いツール**: 個人の作業効率向上が最優先

### 開発アプローチ
**参考実装型新規開発** - Claudiaの優れた要素を選択的に活用

**参考要素**:
- プロジェクト選択UI、セッション管理、カード型メッセージUI
- デザインシステム（Tailwind CSS + Radix UI）

**新規開発要素**:
- ターミナル統合、権限設定チェックボックス、朝・夕テーマシステム

## 技術仕様

### 技術スタック（シンプル構成）
- **デスクトップフレームワーク**: Electron（Node.js統合必須のため）
- **フロントエンド**: React 18 + TypeScript + Vite
- **UI**: Tailwind CSS + Radix UI（Claudia参考）
- **ターミナル**: xterm.js + node-pty
- **状態管理**: Zustand（軽量）
- **設定保存**: localStorage（データベース不要）

### Claudiaからの参考要素（厳選）
- **プロジェクト選択UI**: Recent Projectsリスト、Open Projectボタン
- **カード型メッセージUI**: 対話感のある会話表示
- **デザインシステム**: Tailwind CSS + Radix UIコンポーネント
- **セッション管理**: 基本的な履歴保存・復元

### 核心機能

#### 1. プロジェクト選択・起動フロー
- Claudiaスタイルのプロジェクト選択画面
- セッション選択・新規作成
- 権限設定チェックボックス（`--dangerously-skip-permissions`）
- 設定状態の永続化

#### 2. ターミナル統合（CLI機能維持）
- `ccode`等のローカルエイリアス対応
- `shift+tab`モード切り替え（accept edits、plan mode等）
- 全ビルトインコマンド対応（`/model`、`/permissions`等）
- 既存MCP設定の自動継承

#### 3. 視覚的GUI体験
- ロボットアイコン付きカード型メッセージ
- 朝・夕テーマシステム（4バリエーション）
- 和紙のような優しい背景色
- チャット風対話インターフェース

## アーキテクチャ設計（シンプル構成）

### Electronアプリ構造

#### 1. メインプロセス
- **Claude Code CLI制御**: `spawn`でプロセス起動・管理
- **セッション管理**: プロジェクト・セッション情報の永続化
- **設定管理**: 権限設定・テーマ設定の保存
- **ウィンドウ管理**: シングルウィンドウアプリケーション

#### 2. レンダラープロセス (React)
- **プロジェクト選択画面**: Claudiaスタイルの選択UI
- **対話画面**: ターミナル + カード型メッセージUI統合
- **設定画面**: テーマ選択・権限設定UI

#### 3. ターミナル統合層 (xterm.js + node-pty)
- **ターミナル表示**: xterm.jsによるターミナル描画
- **プロセス通信**: node-ptyによるCLI双方向通信
- **入力制御**: キーボードイベント（shift+tab等）の処理

#### 4. データフロー
```
プロジェクト選択 → セッション選択 → CLI起動 → 対話開始
     ↓              ↓             ↓         ↓
localStorage → localStorage → spawn → xterm.js
```

## 解決する課題・価値提供

### 1. CLIユーザーの課題解決
- **ローカル設定継承**: `ccode`エイリアス、MCP設定等をそのまま使用可能
- **CLI操作感維持**: `shift+tab`、全ビルトインコマンドをGUI内で実行
- **視覚的な優しさ**: カード型UI、ロボットアイコンで対話感を演出

### 2. 日常使いツールとしての価値
- **起動の手軽さ**: プロジェクト選択からセッション開始まで3クリック
- **設定の永続化**: 権限設定・テーマ設定の自動保持
- **目に優しいデザイン**: 朝・夕テーマによる長時間作業への配慮

## 開発段階（シンプル段階的開発）

### Phase 1: 基盤構築（MVP）
- [ ] **Electronプロジェクト初期化**: React + TypeScript + Vite構成
- [ ] **プロジェクト選択画面**: Claudiaスタイル選択UI実装
- [ ] **基本ターミナル統合**: xterm.js + node-pty基盤構築
- [ ] **Claude CLI起動**: 基本的な`ccode`起動・権限チェックボックス

### Phase 2: 核心機能実装
- [ ] **カード型メッセージUI**: ロボットアイコン付き対話画面
- [ ] **セッション管理**: 履歴保存・復元（`-r`相当）機能
- [ ] **CLI機能完全対応**: `shift+tab`モード切り替え、全ビルトインコマンド
- [ ] **設定永続化**: 権限・テーマ設定のlocalStorage保存

### Phase 3: 視覚的体験向上
- [ ] **朝・夕テーマシステム**: 4バリエーション（ライト/ダーク各2色）
- [ ] **和紙風背景色**: 目に優しい配色実装
- [ ] **UI/UX最適化**: アニメーション・トランジション追加
- [ ] **キーボードショートカット**: 全機能へのキー操作対応

### Kiro仕様駆動開発フェーズ
- [x] **初期化完了**: プロジェクト構造・基本仕様
- [x] **要件定義**: ユーザーフィードバック反映済み
- [ ] **詳細設計**: 画面設計・コンポーネント構造設計
- [ ] **実装タスク**: 詳細作業分解・優先順位付け

## プロジェクト目標（個人使用重視）

### 日常使いツール目標（最優先）
- **快適な個人利用**: 開発者本人が日々快適に使用できるツール
- **CLI機能維持**: `ccode`エイリアス、全コマンドをGUI内で完全実行
- **視覚的優しさ**: 朝・夕テーマによる長時間作業への配慮

### 品質・安定性目標（重要）
- **起動の快適さ**: アプリ起動〜作業開始まで10秒以内
- **24時間安定動作**: クラッシュなしの長時間使用
- **設定の永続化**: 権限・テーマ設定の自動保持

### コミュニティ目標（将来的）
- **オープンソース公開**: 他ユーザーへの貢献・フィードバック収集
- **カスタマイズ可能性**: テーマ・設定の拡張性確保
- **ドキュメント整備**: セットアップ・使用方法の明確化

## 成功指標（個人使用重視）

### 機能的成功指標
- [ ] 全Claude Code CLIコマンドがGUI内で実行可能
- [ ] `ccode`等のローカルエイリアスが正常動作
- [ ] セッション復元（`-r`相当）機能が動作

### 使用体験成功指標
- [ ] 開発者本人が3日連続で快適に日常使用
- [ ] 起動から作業開始まで10秒以内を実現
- [ ] 朝・夕テーマで8時間作業しても目の疲労が軽減

### 将来的成功指標
- [ ] オープンソース公開後、月10スター獲得
- [ ] 他ユーザーからの建設的フィードバック受領
- [ ] コミュニティからのプルリクエスト受け入れ

---

**作成日**: 2025-08-21  
**更新日**: 2025-08-21（ユーザーフィードバック反映）  
**バージョン**: v2.0  
**ステータス**: 仕様更新完了・詳細設計準備完了