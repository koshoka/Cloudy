# Cloudy 実装タスクリスト

## 概要

このドキュメントは、詳細設計書を基にCloudyアプリケーションの実装作業を具体的なタスクに分解したものです。  
各タスクは1-2時間程度で完了可能な粒度に分解されており、段階的な実装を可能にします。

---

## Phase 1: 基盤構築（MVP）

### 1.1 プロジェクト初期セットアップ

#### T1-01: Electronプロジェクト初期化 🔧
- [ ] `npm create electron-vite@latest cloudy --template react-ts`
- [ ] 基本的なpackage.json設定確認
- [ ] Electronアプリの最小構成動作確認
- [ ]開発サーバー起動確認（`npm run dev`）

**所要時間**: 30分  
**成果物**: 動作するElectronアプリの最小構成

#### T1-02: 依存関係インストール 📦
- [ ] `npm install tailwindcss @radix-ui/react-* zustand`
- [ ] `npm install xterm xterm-addon-fit node-pty`
- [ ] TypeScript型定義インストール
- [ ] tsconfig.json設定最適化

**所要時間**: 20分  
**成果物**: 必要な依存関係がインストール済みのプロジェクト

#### T1-03: プロジェクト構造構築 📂
- [ ] src/main/, src/renderer/, src/shared/ ディレクトリ作成
- [ ] 基本コンポーネントファイル作成（空の実装）
- [ ] types/, stores/, hooks/ ディレクトリ作成
- [ ] `.gitignore`, `README.md` 設定

**所要時間**: 30分  
**成果物**: 設計書通りのディレクトリ構造

### 1.2 テーマシステム基盤

#### T1-04: CSS変数・Tailwind設定 🎨
- [ ] tailwind.config.js設定（CSS変数対応）
- [ ] src/renderer/styles/globals.css作成
- [ ] src/renderer/styles/themes.css作成（4テーマのCSS変数定義）
- [ ] 和紙風テクスチャCSS実装

**所要時間**: 1時間  
**成果物**: 4テーマ対応のCSS変数システム

#### T1-05: ThemeProvider実装 🌅
- [ ] src/renderer/components/ThemeProvider.tsx実装
- [ ] useTheme カスタムフック作成
- [ ] localStorage連携でテーマ状態保持
- [ ] 動的テーマ切り替え機能

**所要時間**: 1.5時間  
**成果物**: 動的テーマ切り替え機能

### 1.3 状態管理基盤

#### T1-06: Zustand Store基盤実装 🏪
- [ ] src/renderer/stores/app-store.ts実装
- [ ] AppState, AppActions型定義
- [ ] 基本的な状態管理ロジック
- [ ] localStorage永続化ミドルウェア

**所要時間**: 1時間  
**成果物**: 中央集権的状態管理システム

#### T1-07: 設定管理システム ⚙️
- [ ] src/shared/constants.ts作成（STORAGE_KEYS等）
- [ ] SettingsManager class実装（main process）
- [ ] IPC通信での設定読み書き
- [ ] 権限設定・テーマ設定の永続化

**所要時間**: 1.5時間  
**成果物**: 設定永続化システム

### 1.4 プロジェクト選択画面実装

#### T1-08: ProjectSelector基本実装 📁
- [ ] src/renderer/components/ProjectSelector.tsx実装
- [ ] Recent Projectsリスト表示
- [ ] "Open Project"ボタン機能
- [ ] Claudiaスタイルのカードデザイン

**所要時間**: 2時間  
**成果物**: 基本的なプロジェクト選択画面

#### T1-09: プロジェクト管理機能 💾
- [ ] プロジェクト一覧のlocalStorage保存
- [ ] プロジェクト選択でディレクトリブラウザ開く
- [ ] 最近使用したプロジェクトの追跡
- [ ] プロジェクトパス表示

**所要時間**: 1.5時間  
**成果物**: 完全に動作するプロジェクト選択機能

---

## Phase 2: 核心機能実装

### 2.1 セッション選択画面

#### T2-01: SessionSelector実装 📋
- [ ] src/renderer/components/SessionSelector.tsx実装
- [ ] Recent Sessionsリスト表示
- [ ] "New Session"ボタン機能
- [ ] セッション詳細表示（日時、ステータス）

**所要時間**: 2時間  
**成果物**: セッション選択画面UI

#### T2-02: 権限チェックボックス実装 ☑️
- [ ] src/renderer/components/PermissionCheckbox.tsx実装
- [ ] チェックボックス状態の永続化
- [ ] "Skip mode"ラベル表示
- [ ] トグル時の設定保存

**所要時間**: 1時間  
**成果物**: 権限設定チェックボックス機能

#### T2-03: セッション管理システム 💽
- [ ] SessionManager class実装（main process）
- [ ] セッション情報のlocalStorage保存
- [ ] プロジェクト別セッション管理
- [ ] セッション作成・読み込み機能

**所要時間**: 2時間  
**成果物**: セッション永続化システム

### 2.2 ターミナル統合基盤

#### T2-04: xterm.js基本統合 💻
- [ ] src/renderer/components/TerminalInput.tsx実装
- [ ] xterm.jsの基本設定・初期化
- [ ] 透明背景でテーマ色適用
- [ ] 基本的なターミナル表示

**所要時間**: 1.5時間  
**成果物**: ターミナル表示コンポーネント

#### T2-05: Claude Code CLI統合 🔌
- [ ] src/main/cli-manager.ts実装
- [ ] node-ptyでClaude Code CLI起動
- [ ] `ccode`/`claude`コマンド判定ロジック
- [ ] pty ↔ xterm双方向通信

**所要時間**: 2.5時間  
**成果物**: Claude Code CLI統合システム

#### T2-06: CLI起動フロー実装 🚀
- [ ] プロジェクト選択→セッション選択→CLI起動の流れ
- [ ] 権限設定に基づくコマンド選択
- [ ] プロセス起動エラーハンドリング
- [ ] 起動状態のUI表示

**所要時間**: 2時間  
**成果物**: 完全なCLI起動フロー

### 2.3 対話画面基盤

#### T2-07: ChatInterface基本実装 💬
- [ ] src/renderer/components/ChatInterface.tsx実装
- [ ] 基本的なレイアウト（会話エリア + 入力エリア）
- [ ] ウィンドウタイトル動的更新
- [ ] 画面遷移管理

**所要時間**: 1.5時間  
**成果物**: 対話画面の基本レイアウト

#### T2-08: MessageCard実装 💌
- [ ] src/renderer/components/MessageCard.tsx実装
- [ ] Claude/Userアイコン表示
- [ ] カード型デザイン
- [ ] タイムスタンプ表示
- [ ] Markdown対応

**所要時間**: 2時間  
**成果物**: カード型メッセージ表示機能

#### T2-09: メッセージ流れの統合 🔄
- [ ] ターミナル出力をメッセージとして表示
- [ ] Claudeからの返答をカード型で表示
- [ ] ユーザー入力の履歴管理
- [ ] スクロール管理

**所要時間**: 2時間  
**成果物**: 統合されたメッセージフロー

---

## Phase 3: 視覚的体験向上

### 3.1 テーマシステム完成

#### T3-01: 朝テーマ実装完成 🌅
- [ ] 朝ライトモード完全実装
- [ ] 朝ダークモード完全実装
- [ ] グラデーション背景の調整
- [ ] コンポーネント全体への適用確認

**所要時間**: 2時間  
**成果物**: 完成した朝テーマ

#### T3-02: 夕テーマ実装完成 🌇
- [ ] 夕ライトモード完全実装
- [ ] 夕ダークモード完全実装
- [ ] 紫〜ピンク系グラデーション調整
- [ ] テーマ切り替えアニメーション

**所要時間**: 2時間  
**成果物**: 完成した夕テーマ

#### T3-03: テーマ選択UI 🎛️
- [ ] テーマ選択ドロップダウン実装
- [ ] テーマプレビュー機能
- [ ] 設定画面またはクイックトグル
- [ ] テーマ切り替え時のスムーズな遷移

**所要時間**: 1.5時間  
**成果物**: ユーザーフレンドリーなテーマ選択機能

### 3.2 UI/UX最適化

#### T3-04: アニメーション・トランジション ✨
- [ ] 画面遷移アニメーション
- [ ] ボタンホバーエフェクト
- [ ] カード表示アニメーション
- [ ] テーマ切り替えトランジション

**所要時間**: 2時間  
**成果物**: 洗練されたアニメーション体験

#### T3-05: レスポンシブ対応 📱
- [ ] 異なるウィンドウサイズでの表示確認
- [ ] 最小ウィンドウサイズ設定
- [ ] コンポーネントの可変幅対応
- [ ] 文字サイズ調整

**所要時間**: 1.5時間  
**成果物**: 柔軟なレイアウト対応

### 3.3 キーボードショートカット

#### T3-06: shift+tab機能実装 ⌨️
- [ ] xterm.js内でのキーイベント処理
- [ ] shift+tabでのモード切り替え実装
- [ ] accept edits on/off表示
- [ ] plan mode on/off表示

**所要時間**: 2.5時間  
**成果物**: Claude Code CLI完全互換のキーボード操作

#### T3-07: その他ショートカット 🔑
- [ ] Cmd+N（新規セッション）
- [ ] Cmd+O（プロジェクト選択）
- [ ] Cmd+,（設定画面）
- [ ] Escape（前の画面に戻る）

**所要時間**: 1.5時間  
**成果物**: 包括的なキーボードショートカット

### 3.4 セッション復元機能

#### T3-08: セッション復元実装 🔄
- [ ] `ccode -r`相当の機能実装
- [ ] セッション履歴からの状態復元
- [ ] 会話履歴の復元表示
- [ ] プロジェクト設定の復元

**所要時間**: 2.5時間  
**成果物**: 完全なセッション復元機能

---

## 品質保証・最終調整

### Q1: テスト・デバッグ

#### TQ-01: 基本機能テスト 🧪
- [ ] 全画面遷移の動作確認
- [ ] テーマ切り替えの動作確認
- [ ] 設定保存・復元の確認
- [ ] セッション管理の確認

**所要時間**: 2時間  
**成果物**: 動作確認済みの基本機能

#### TQ-02: CLI統合テスト 🔬
- [ ] `ccode`/`claude`コマンドの動作確認
- [ ] 全ビルトインコマンドのテスト
- [ ] エラーハンドリングの確認
- [ ] パフォーマンステスト

**所要時間**: 2時間  
**成果物**: 安定したCLI統合機能

### Q2: 最適化・ポリッシュ

#### TQ-03: パフォーマンス最適化 ⚡
- [ ] 起動時間の測定・最適化
- [ ] メモリ使用量の確認・最適化
- [ ] ターミナル描画パフォーマンス調整
- [ ] 不要なレンダリングの削減

**所要時間**: 2時間  
**成果物**: パフォーマンス最適化済みアプリ

#### TQ-04: 最終ポリッシュ ✨
- [ ] UI細部の調整
- [ ] エラーメッセージの改善
- [ ] ローディング状態の改善
- [ ] アクセシビリティ改善

**所要時間**: 1.5時間  
**成果物**: 本番品質のアプリケーション

---

## 実装スケジュール（目安）

### 集中開発の場合（1週間）
- **Day 1**: T1-01〜T1-07（基盤構築）
- **Day 2**: T1-08〜T2-03（プロジェクト・セッション機能）
- **Day 3**: T2-04〜T2-06（ターミナル統合）
- **Day 4**: T2-07〜T2-09（対話画面）
- **Day 5**: T3-01〜T3-03（テーマ完成）
- **Day 6**: T3-04〜T3-08（UI/UX・ショートカット）
- **Day 7**: TQ-01〜TQ-04（品質保証）

### 平日夜間開発の場合（3-4週間）
- **週1**: Phase 1（基盤構築）
- **週2**: Phase 2前半（セッション・ターミナル）
- **週3**: Phase 2後半・Phase 3前半（対話・テーマ）
- **週4**: Phase 3後半・品質保証（最適化・完成）

---

## タスク実行時の注意事項

### 🔥 必須確認事項
1. **各タスク完了時**に必ず動作確認を行う
2. **git commit**でタスク単位の変更を記録する
3. **TypeScript型エラー**を残さない
4. **console.error**をチェックしてエラーを解消する

### 🎯 品質基準
- アプリ起動時間: 3秒以内
- UI反応時間: 200ms以内
- メモリ使用量: 300MB以下（アイドル時）
- 24時間連続動作でクラッシュしない

### 🛠️ デバッグ環境
- Chrome DevToolsでレンダラープロセス確認
- `console.log`でのデータフロー確認
- Electron Main プロセスのログ確認
- ターミナルでのコマンド実行確認

---

## 完成後のマイルストーン

### 🏆 MVP達成基準
- [ ] Cloudyアプリが正常に起動する
- [ ] プロジェクト選択からClaude Code CLIまで一貫して動作する
- [ ] `ccode`エイリアスが正常に動作する
- [ ] 権限設定が保存・復元される
- [ ] カード型UIでClaude との対話ができる

### 🌟 完全版達成基準
- [ ] 4テーマすべてが美しく動作する
- [ ] shift+tabでのモード切り替えが動作する
- [ ] セッション復元機能が動作する
- [ ] 8時間連続使用しても快適に動作する
- [ ] 開発者本人が日常的に使いたくなる品質

---

**作成日**: 2025年08月21日  
**バージョン**: v1.0  
**ステータス**: 実装準備完了・開発開始可能